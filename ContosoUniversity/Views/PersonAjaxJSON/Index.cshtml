@model IEnumerable<ContosoUniversity.Models.PersonAjaxJSON>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <title>Index</title>
</head>
<body>


    <div class="editor-label">
        <label for="Name">Name</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" id="Name" name="Name" type="text" value="" />
    </div>
    <div class="editor-label">
        <label for="Age">Age</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" id="Age" name="Age" type="text" value="" />
    </div>
    <p><input type="submit" value="Save" id="personCreate" /></p>

    <div><span id="resultMessage"></span></div>

    <script type="text/javascript">

        $(function () {
            $("#personCreate").click(function () {
                var person = getPerson();

                // poor man's validation
                if (person == null) {
                    alert("Specify a name please!");
                    return;
                }

                // take the data and post it via json
                $.post("/PersonAjaxJSON/Save", person, function (data) {
                    // get the result and do some magic with it
                    var message = data.Message;
                    $("#resultMessage").html(message);
                });
            });
        });

        function getPerson() {
            var name = $("#Name").val();
            var age = $("#Age").val();

            // poor man's validation
            return (name == "") ? null : { Name: name, Age: age };
        }

    </script>

</body>
</html>




@*<p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Age)
            </th>
            <th></th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Age)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
                @Html.ActionLink("Details", "Details", new { id=item.ID }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.ID })
            </td>
        </tr>
    }

    </table>*@
